<!-- BEGIN PAGE TITLE-->
<div class="page-title-wrap">
    <h3 class="page-title"> <i class="icon-user"></i> ユーザー検索</h3>
    <div class="page-title-action">
        <!--<a href="/news/create" class="btn btn-sm blue" title="新規作成">
            <i class="fa fa-plus"></i> 新規作成
        </a>-->
    </div>
</div>
<!-- END PAGE TITLE-->

<div class="row">
    <div class="col-md-12">
        <div class="portlet light bordered">
            <div class="portlet-title tabbable-line">
                <div class="caption">
                    <i class="icon-magnifier font-dark"></i>
                    <span class="caption-subject font-dark bold uppercase">絞り込み検索</span>
                </div>
            </div>
            <div class="portlet-body">
                <form method="get" class="form" role="form">
                    <div class="row">
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">ID</label>
                            <div class="form-group">
                                <input type="text" name="id" class="form-control" value="<!--{$search.id|escape|default:''}-->" placeholder="ユーザーID">
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">ID</label>
                            <div class="form-group">
                                <input type="text" name="login_id" class="form-control" value="<!--{$search.login_id|escape|default:''}-->" placeholder="ログインID">
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">ID</label>
                            <div class="form-group">
                                <input type="text" name="nickname" class="form-control" value="<!--{$search.nickname|escape|default:''}-->" placeholder="ニックネーム">
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">Eメールアドレス</label>
                            <div class="form-group">
                                <input type="email" name="email" class="form-control" value="<!--{$search.email|escape|default:''}-->" placeholder="メールアドレス">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">ID</label>
                            <div class="form-group">
                                <input type="text" name="code" class="form-control" value="<!--{$search.code|escape|default:''}-->" placeholder="紹介コード">
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">ID</label>
                            <div class="form-group">
                                <input type="text" name="user_inviter_id" class="form-control" value="<!--{$search.user_inviter_id|escape|default:''}-->" placeholder="紹介者ユーザーID">
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12">
                            <label class="sr-only">ID</label>
                            <div class="form-group">
                                <input type="text" name="user_inviter_login_id" class="form-control" value="<!--{$search.user_inviter_login_id|escape|default:''}-->" placeholder="紹介者ログインID">
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-3 col-xs-12">
                            <div class="input-group date date-picker date-form" data-date-format="mm-dd-yyyy"
                                 data-date-viewmode="years">
                                <input type="text" class="form-control" name="from_date"  value="<!--{$search.from_date|escape|default:''}-->">

                                <div class="input-group-btn">
                                    <button class="btn default" type="button">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-xs-12">
                            <div class="input-group date date-picker" data-date-format="mm-dd-yyyy"
                                 data-date-viewmode="years">
                                <input type="text" class="form-control" name="to_date"  value="<!--{$search.to_date|escape|default:''}-->">

                                <div class="input-group-btn">
                                    <button class="btn default" type="button">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                </div>
                            </div>
                        </div>



                        <div class="col-md-3 col-xs-12">
                            <div class="checkbox-group"><input type="checkbox" name="student" value="1" <!--{if $search.student|default:''}-->checked<!--{/if}--> > 子ども</div>
                            <div class="checkbox-group"><input type="checkbox" name="parent" value="1" <!--{if $search.parent|default:''}-->checked<!--{/if}--> > 保護者</div>
                            <div class="checkbox-group"><input type="checkbox" name="contract" value="1" <!--{if $search.contract|default:''}-->checked<!--{/if}--> > 月額会員</div>
                        </div>
                        <div class="col-xs-12 text-right">
                            <a href="/user/search" class=" btn btn-lg grey-salsa">リセット</a>
                            <button type="submit" class="btn btn-lg green"><i class="icon-magnifier font-white"></i> 検索</button>
                        </div>

                    </div>
                </form>
            </div>
        </div>
        <div class="portlet light bordered">
            <div class="portlet-title tabbable-line">
                <div class="caption">
                    <i class="icon-list font-dark"></i>
                    <span class="caption-subject font-dark bold uppercase">ユーザー一覧</span>
                </div>
            </div>
            <div class="portlet-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-container">
                            <div class="table-actions-wrapper">
                            </div>
                            <div class="pull-left">
                                <!--{include file='partial/pagination_limit.html' config=$pagination}-->
                            </div>
                            <!-- Begin: life time stats -->
                            <div class="clearfix mt15">
                                <a href="<!--{$csv_download_string|default:'#'}-->" class="btn btn-lg green pull-right"><i class="icon-cloud-download"></i> CSVダウンロード</a>
                            </div>
                            <!--{if isset($pagination)}-->
                            <!--{include file='partial/pagination.html' config=$pagination}-->
                            <!--{/if}-->
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr class="heading">
                                    <th class="text-right" width="6%">ユーザーID</th>
                                    <th width="9%">ログインID</th>
                                    <th width="9%">ニックネーム</th>
                                    <th width="6%">ユーザー種別</th>
                                    <th class="text-center" width="8%">スクールTV Plusステータス</th>
                                    <th width="8%">メールアドレス</th>
                                    <th class="text-right" width="5%">保持コイン数</th>
                                    <th class="text-right" width="5%">保ラビ持ポイント</th>
                                    <th class="text-right" width="5%">ラビポイント累計</th>
                                    <th width="5%">紹介コード</th>
                                    <th width="5%">キャンペーンコード</th>
                                    <th width="5%">紹介者ユーザーID</th>
                                    <th width="7%">紹介者ログインID</th>
                                    <th class="text-center" width="5%">ステータス</th>
                                    <th width="6%">登録日時</th>
                                    <th width="5%">選択</th>
                                </tr>
                                </thead>

                                <tbody>
                                <!--{if $users!=null}-->
                                <!--{foreach from=$users key=key item=item}-->
                                <tr>
                                    <td  class="text-right"><!--{$item.id|escape|default:''}--></td>
                                    <td style="word-break: break-all;"><!--{$item.login_id|escape|default:''}--></td>
                                    <td><!--{$item.nickname|escape|default:'ニックネームなし'}--></td>
                                    <td><!--{if $item.primary_type == 'student' }-->子ども<!--{else}-->保護者<!--{/if}--></td>
                                    <td class="text-center">
                                        <!--{if $item.primary_type == 'parent' }-->
                                        <span>-</span>
                                        <!--{else}-->
                                        <span class="label <!--{if ($item.contract_status == 'under_contract')}-->label-success
                                        <!--{elseif ($item.contract_status == 'pending')}-->label-warning
                                        <!--{elseif ($item.contract_status == 'canceling')}-->label-warning
                                        <!--{elseif ($item.contract_status == 'not_contract')}-->label-danger
                                        <!--{else}-->label-primary<!--{/if}-->">
                                            <!--{if $item.contract_status == 'under_contract'}-->
                                            契約中
                                            <!--{elseif $item.contract_status == 'pending'}-->
                                            更新停止
                                            <!--{elseif $item.contract_status == 'canceling'}-->
                                            解約
                                            <!--{elseif $item.contract_status == 'not_contract'}-->
                                            解約済み
                                            <!--{else}-->
                                            未契約
                                            <!--{/if}-->
                                        </span>
                                        <!--{/if}-->
                                    </td>
                                    <td><!--{$item.email|escape|default:''}--></td>
                                    <td class="text-right"><!--{number_format($item.current_coin|escape|default:'')}--></td>
                                    <td class="text-right"><!--{number_format($item.current_rabipoint|escape|default:'0')}--></td>
                                    <td class="text-right"><!--{if isset($item.total_rabipoint)}--><!--{$item.total_rabipoint|@number_format|escape}--><!--{else}-->0<!--{/if}--></td>
                                    <td><!--{$item.invitation_code|escape|default:'-'}--></td>
                                    <td><!--{$item.campaign_code|escape|default:'-'}--></td>
                                    <td><!--{$item.inviter_id|escape|default:'-'}--></td>
                                    <td><!--{$item.inviter_login_id|escape|default:'-'}--></td>
                                    <td class="text-center"><span class="label <!--{if ($item.status == 'active')}-->label-success
                                    <!--{elseif ($item.status == 'suspended')}-->label-danger
                                    <!--{else}-->label-warning
                                    <!--{/if}-->">
                                        <!--{if $item.status == 'active'}-->会員
                                        <!--{elseif $item.status == 'suspended'}-->退会
                                        <!--{else}-->未承認
                                        <!--{/if}-->
                                        </span>
                                    </td>
                                    <td><p class="td-ellipse" title="<!--{$item.registered_at|escape|default:''}-->"><!--{if $item.registered_at != ''}--><!--{date('Y/m/d H:i', strtotime($item.registered_at))}--><!--{else}-->-<!--{/if}--></p></td>
                                    <td><a href="/user/detail/<!--{$item.id|escape|default:''}-->" class="btn green pull-right">選択</a></td>
                                </tr>
                                <!--{/foreach}-->
                                <!--{else}-->
                                <td colspan="15" class="table-empty">該当するユーザーがいません</td>
                                <!--{/if}-->
                                </tbody>
                            </table>
                            <!--{if isset($pagination)}-->
                            <!--{include file='partial/pagination.html' config=$pagination}-->
                            <!--{/if}-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--{content_for name="page_plugins"}-->
<script src="/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.ja.min.js" type="text/javascript"></script>
<!--{/content_for}-->
<!--{content_for name="page_scripts"}-->
<script>
    if (jQuery().datepicker) {
        $('.date-picker').datepicker({
            rtl: App.isRTL(),
            orientation: "left",
            autoclose: true,
            language: 'ja',
            format: 'yyyy-mm-dd'
        });
        $('body').removeClass("modal-open"); // fix bug when inline picker is used in modal
    }
    $('[data-toggle="cancel"]').click(function (event) {
        event.preventDefault();
        var form = $(this).closest('form');
        form.find('input, select, textarea').val('');
    });
</script>
<!--{/content_for}-->